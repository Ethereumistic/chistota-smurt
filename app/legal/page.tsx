'use client'
import React, { useState, useEffect } from 'react';
import { useRouter, usePathname } from 'next/navigation';

type TabType = 'terms' | 'privacy' | 'cookies';

const LegalPage: React.FC = () => {
  const [activeTab, setActiveTab] = useState<TabType>('terms');
  const router = useRouter();
  const pathname = usePathname();

  useEffect(() => {
    const searchParams = new URLSearchParams(window.location.search);
    const tabFromUrl = searchParams.get('tab') as TabType;
    if (tabFromUrl && ['terms', 'privacy', 'cookies'].includes(tabFromUrl)) {
      setActiveTab(tabFromUrl);
    }
  }, [pathname]);

  const handleTabChange = (tab: TabType) => {
    setActiveTab(tab);
    router.push(`/legal?tab=${tab}`, undefined,);
  };

  const tabContent = {
    terms: `
# Правила и условия

## 1. Общи разпоредби

1.1. Настоящите Правила и условия уреждат отношенията между посетителите на уебсайта за филма "Чистота или Смърт" (наричан по-долу "Сайтът") и собственика на Сайта.

1.2. С използването на Сайта, вие се съгласявате с настоящите Правила и условия. Ако не сте съгласни с тях, моля, не използвайте Сайта.

## 2. Информация за филмовите прожекции

2.1. Сайтът предоставя информация за физическите премиери на филма "Чистота или Смърт" в България, включително градове, кина и часове на прожекциите.

2.2. Въпреки че полагаме усилия да поддържаме актуална информация, не гарантираме пълната точност на предоставените данни. Препоръчваме да проверите информацията и при съответното кино.

## 3. Закупуване на билети

3.1. Сайтът предлага възможност за закупуване на билети чрез интеграция с bilet.bg.

3.2. При закупуване на билети, вие влизате в договорни отношения с bilet.bg и съответното кино. Сайтът не носи отговорност за транзакциите, извършени чрез bilet.bg.

## 4. Интелектуална собственост

4.1. Всички права върху съдържанието на Сайта, включително текстове, изображения, лога и други материали, са собственост на притежателите на правата върху филма "Чистота или Смърт" или са използвани с разрешение.

4.2. Забранено е копирането, разпространението или използването на материали от Сайта без изрично писмено разрешение.

## 5. Ограничаване на отговорността

5.1. Сайтът се предоставя "както е" без каквито и да било гаранции.

5.2. Не носим отговорност за преки или косвени щети, произтичащи от използването или невъзможността за използване на Сайта.

## 6. Промени в Правилата и условията

6.1. Запазваме си правото да променяме тези Правила и условия по всяко време. Промените влизат в сила веднага след публикуването им на Сайта.

## 7. Приложимо право

7.1. Настоящите Правила и условия се уреждат от законите на Република България.
    `,
    privacy: `
# Политика за поверителност

## 1. Въведение

Настоящата Политика за поверителност описва как събираме, използваме и защитаваме личната информация, предоставена от посетителите на уебсайта за филма "Чистота или Смърт" (наричан по-долу "Сайтът").

## 2. Събиране на информация

2.1. Ние събираме следните видове информация:
- Информация, която предоставяте доброволно при използване на функциите на Сайта.
- Информация, събрана автоматично чрез бисквитки и подобни технологии, включително Facebook Pixel.

## 3. Използване на информацията

3.1. Използваме събраната информация за:
- Предоставяне и подобряване на услугите на Сайта.
- Анализ на посещаемостта и поведението на потребителите.
- Персонализиране на рекламно съдържание чрез Facebook Pixel.

## 4. Споделяне на информация

4.1. Не продаваме, търгуваме или прехвърляме вашата лична информация на трети страни, с изключение на:
- bilet.bg за целите на закупуване на билети.
- Facebook чрез използването на Facebook Pixel.

## 5. Защита на информацията

5.1. Прилагаме подходящи технически и организационни мерки за защита на вашата лична информация.

## 6. Вашите права

6.1. Имате право да:
- Поискате достъп до вашата лична информация.
- Поискате коригиране или изтриване на вашата лична информация.
- Оттеглите съгласието си за обработка на лични данни.

## 7. Промени в Политиката за поверителност

7.1. Запазваме си правото да актуализираме тази Политика за поверителност по всяко време. Промените влизат в сила веднага след публикуването им на Сайта.

## 8. Контакт

8.1. За въпроси относно тази Политика за поверителност, моля свържете се с нас на dbproductions.bg@gmail.com
    `,
    cookies: `
# Политика за бисквитките

## 1. Какво са бисквитките?

Бисквитките са малки текстови файлове, които се запазват на вашето устройство (компютър, таблет, смартфон) при посещение на уебсайта за филма "Чистота или Смърт" (наричан по-долу "Сайтът").

## 2. Как използваме бисквитките?

2.1. Използваме следните видове бисквитки:
- Функционални бисквитки: Необходими за правилното функциониране на Сайта.
- Аналитични бисквитки: Помагат ни да разберем как посетителите използват Сайта.
- Рекламни бисквитки: Използват се за показване на релевантни реклами, включително чрез Facebook Pixel.

## 3. Facebook Pixel

3.1. Използваме Facebook Pixel, който поставя бисквитки за проследяване на конверсии, оптимизиране на реклами и ремаркетинг.

## 4. Управление на бисквитките

4.1. Можете да контролирате и/или изтривате бисквитки по ваше желание. За повече информация вижте aboutcookies.org.

4.2. Можете да изтриете всички бисквитки, които вече са запазени на вашето устройство, а също така можете да настроите повечето браузъри да ги блокират. Ако направите това обаче, може да се наложи ръчно да коригирате някои настройки всеки път, когато посещавате Сайта, а някои услуги и функции може да не работят.

## 5. Промени в Политиката за бисквитките

5.1. Запазваме си правото да актуализираме тази Политика за бисквитките по всяко време. Промените влизат в сила веднага след публикуването им на Сайта.

## 6. Съгласие

6.1. С продължаването на използването на Сайта, вие се съгласявате с използването на бисквитки в съответствие с тази Политика за бисквитките.
    `,
  };

  return (
    <div className="container mx-auto px-4 py-8 justify-center items-center flex flex-col mt-24">
      <h1 className="text-4xl font-montserrat text-black mb-8">Правила и условия</h1>
      <div className="mb-8">
        <div className="flex space-x-4">
          {['terms', 'privacy', 'cookies'].map((tab) => (
            <button
              key={tab}
              className={`px-4 py-2 rounded ${
                activeTab === tab ? 'bg-black text-white' : 'bg-gray-400'
              }`}
              onClick={() => handleTabChange(tab as TabType)}
            >
              {tab === 'terms' && 'Правила и условия'}
              {tab === 'privacy' && 'Политика за поверителност'}
              {tab === 'cookies' && 'Бисквитки'}
            </button>
          ))}
        </div>
      </div>
      <div className="prose max-w-6xl">
        {tabContent[activeTab].split('\n').map((line, index) => {
          if (line.startsWith('# ')) {
            return <h1 className='text-4xl font-montserrat text-black mb-8' key={index}>{line.substring(2)}</h1>;
          } else if (line.startsWith('## ')) {
            return <h2 className='text-2xl font-montserrat text-black my-8' key={index}>{line.substring(3)}</h2>;
          } else {
            return <p className='text-black font-montserrat text-lg' key={index}>{line}</p>;
          }
        })}
      </div>
    </div>
  );
};

export default LegalPage;